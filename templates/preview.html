{% extends "base.html" %}

{% block title %}Your Website Preview - SiteGen{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto py-12 px-4">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">Your Website is Ready! ðŸŽ‰</h1>
        <p class="text-gray-600">Preview your generated website below. You can make changes or go live.</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
        <!-- Website Preview Header -->
        <div class="bg-gray-100 px-6 py-4 border-b flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
            </div>
            <div class="text-sm text-gray-600 bg-white px-3 py-1 rounded">
                {{ business.business_name }}.com
            </div>
            <div class="flex space-x-2">
                <a href="/generated_sites/{{ business.id }}/index.html" target="_blank" 
                   class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                    Open Full Site
                </a>
            </div>
        </div>

        <!-- Website Preview Frame -->
        <div class="relative">
            <iframe src="/generated_sites/{{ business.id }}/index.html" 
                    class="w-full h-screen border-0"
                    title="Website Preview">
            </iframe>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="mt-8 text-center space-x-4">
        <a href="{{ url_for('capture_business_info') }}" 
           class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">
            Make Changes
        </a>
        <button onclick="deployToProduction()" 
                class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg">
            Deploy Website
        </button>
        <a href="/generated_sites/{{ business.id }}/index.html" target="_blank"
           class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg">
            View Full Site
        </a>
    </div>

    <!-- Website Details -->
    <div class="mt-12 bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Website Details</h2>
        <div class="grid md:grid-cols-2 gap-6">
            <div>
                <h3 class="font-semibold text-gray-700 mb-2">Business Information</h3>
                <ul class="text-gray-600 space-y-1">
                    <li><strong>Name:</strong> {{ business.business_name }}</li>
                    <li><strong>Industry:</strong> {{ business.industry }}</li>
                    <li><strong>Email:</strong> {{ business.email }}</li>
                    {% if business.phone %}
                    <li><strong>Phone:</strong> {{ business.phone }}</li>
                    {% endif %}
                    {% if business.address %}
                    <li><strong>Address:</strong> {{ business.address }}</li>
                    {% endif %}
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-gray-700 mb-2">Generated Files</h3>
                <ul class="text-gray-600 space-y-1">
                    {% for file in site.files %}
                    <li>âœ… {{ file }}</li>
                    {% endfor %}
                </ul>
                <div class="mt-4">
                    <p class="text-sm text-gray-500">
                        <strong>Site ID:</strong> {{ business.id }}<br>
                        <strong>Generated:</strong> {{ business.created_at[:19] }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function deployToProduction() {
    if (confirm('Deploy your website to production? This will make it live on the internet.')) {
        alert('Deployment feature coming soon! For now, you can download your files and host them anywhere.');
    }
}
</script>
{% endblock %}